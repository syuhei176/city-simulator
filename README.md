# 都市シミュレーター (City Simulator)

交通重視の本格的な2D都市シミュレーター。TypeScriptで開発されています。

**🎮 [デモを試す（GitHub Pages）](https://syuhei176.github.io/city-simulator/)**

## 🎯 プロジェクト概要

このプロジェクトは、リアルタイムの交通シミュレーションを中心とした都市建設・管理シミュレーターです。
プレイヤーは道路網を設計し、ゾーニングを行い、都市の成長と交通の流れを最適化していきます。

## ✨ 現在の機能 (Phase 3完了)

### コアシステム (Phase 1)
- ✅ グリッドベースのマップシステム (200x200セル)
- ✅ Canvas 2D レンダリング
- ✅ スムーズなカメラ制御（パン、ズーム）
- ✅ ゲームループとシミュレーションエンジン

### 建設ツール (Phase 1)
- ✅ 道路建設（小・中・大の3種類）
- ✅ ゾーニング（住宅・商業・工業）
- ✅ ブルドーザー（破壊）

### UI/UX (Phase 1)
- ✅ HUD（統計表示）
- ✅ ツールバー
- ✅ キーボードショートカット

### 道路ネットワークシステム (Phase 2)
- ✅ 道路配置システムの拡張
- ✅ グラフ構造でネットワーク構築
- ✅ A*経路探索実装
- ✅ 道路種類と接続ルール

### 交通シミュレーション (Phase 3)
- ✅ 車両エージェント実装
- ✅ 交通流シミュレーション
- ✅ 渋滞発生ロジック
- ✅ 交通データ収集

### iPad/モバイル対応
- ✅ タッチ操作サポート（タップ、スワイプ）
- ✅ ピンチズーム機能
- ✅ タッチフレンドリーなUI
- ✅ レスポンシブデザイン

## 🎮 操作方法

### iPad/タブレット操作
- **1本指スワイプ**: マップをパン（移動）/ 道路・ゾーン配置
- **2本指ピンチ**: ズームイン/アウト
- **ツールバー**: 画面下部のボタンで道路やゾーンを選択

### PC/マウス操作

#### カメラ操作
- **ドラッグ**: マップをパン（移動）
- **マウスホイール**: ズームイン/アウト
- **矢印キー**: カメラ移動
- **+/-**: ズーム

#### 建設ツール
- **1**: 小道路
- **2**: 中道路
- **3**: 大道路
- **R**: 住宅ゾーン
- **C**: 商業ゾーン
- **I**: 工業ゾーン
- **D**: ブルドーザー
- **ESC**: ツール選択解除

#### ゲーム制御
- **Space**: 一時停止/再開

## 🚀 開発環境

### 必要なもの
- Node.js 18+
- npm

### デプロイ

このプロジェクトはGitHub Pagesに自動デプロイされます。mainブランチまたは開発ブランチにプッシュすると、GitHub Actionsが自動的にビルドとデプロイを実行します。

### セットアップ

```bash
# 依存パッケージのインストール
npm install

# 開発サーバー起動
npm run dev

# 型チェック
npm run type-check

# プロダクションビルド
npm run build

# ビルド結果のプレビュー
npm run preview
```

## 📁 プロジェクト構造

```
city-simulator/
├── src/
│   ├── core/              # コアロジック
│   │   ├── types.ts       # 型定義
│   │   ├── Cell.ts        # セルクラス
│   │   ├── Grid.ts        # グリッドシステム
│   │   └── GameEngine.ts  # ゲームエンジン
│   ├── renderer/          # レンダリング
│   │   ├── Camera.ts      # カメラ制御
│   │   └── MapRenderer.ts # マップ描画
│   ├── ui/                # UI コンポーネント
│   │   ├── InputHandler.ts
│   │   └── HUD.ts
│   ├── transport/         # 交通システム（実装予定）
│   ├── buildings/         # 建物システム（実装予定）
│   ├── systems/           # ゲームシステム（実装予定）
│   ├── simulation/        # シミュレーション（実装予定）
│   ├── utils/             # ユーティリティ（実装予定）
│   └── main.ts           # エントリーポイント
├── public/
│   └── assets/
├── index.html
├── package.json
├── tsconfig.json
└── vite.config.ts
```

## 🗓️ 開発ロードマップ

### ✅ Phase 1: 基礎システム（完了）
- ✅ グリッドマップシステム
- ✅ 基本的な建物配置
- ✅ Canvas描画とカメラ制御
- ✅ 基本UI

### ✅ Phase 2: 道路ネットワーク（完了）
- ✅ 道路配置システムの拡張
- ✅ グラフ構造でネットワーク構築
- ✅ A*経路探索実装
- ✅ 道路種類と接続ルール

### ✅ Phase 3: 交通シミュレーション（完了）
- ✅ 車両エージェント実装
- ✅ 交通流シミュレーション
- ✅ 渋滞発生ロジック
- ✅ 交通データ収集

### Phase 4: ゾーニング & 建物
- R/C/I ゾーン実装
- 建物成長システム
- 需要計算

### Phase 5: 人口 & 経済
- 市民エージェント
- 通勤システム
- 経済循環（税収/支出）

### Phase 6: 公共交通
- バス路線システム
- 地下鉄/路面電車
- 乗客シミュレーション

### Phase 7: UI/UX & 分析ツール
- 交通ヒートマップ
- 統計グラフ
- 詳細HUD

### Phase 8: 高度な機能
- セーブ/ロード
- マップエディタ
- パフォーマンス最適化

## 🛠️ 技術スタック

- **言語**: TypeScript
- **レンダリング**: HTML5 Canvas (2D)
- **ビルドツール**: Vite
- **テスト**: Vitest (予定)

## 📝 ライセンス

MIT License

## 🤝 コントリビューション

このプロジェクトは開発中です。Issue やPull Request を歓迎します！

---

**開発開始日**: 2025-10-25
**現在のPhase**: Phase 3 完了 → Phase 4 準備中